# æ™ºèƒ½è€ƒè¯•ç”Ÿæˆç³»ç»Ÿ

è¿™ä¸ªç³»ç»Ÿå¯ä»¥è‡ªåŠ¨å¤„ç†å¤šç§æ–‡ä»¶æ ¼å¼ï¼ˆæ–‡æ¡£ã€PDFã€å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ï¼‰ï¼Œé€šè¿‡Pythonè„šæœ¬è¿›è¡Œæ™ºèƒ½å¤„ç†å’ŒAIç”Ÿæˆï¼Œè‡ªåŠ¨åˆ›å»ºé«˜è´¨é‡çš„è€ƒè¯•é¢˜ç›®ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ“¤ **å¤šæ ¼å¼æ–‡ä»¶ä¸Šä¼ **: æ”¯æŒæ–‡æ¡£ã€PDFã€å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰å¤šç§æ ¼å¼
- ğŸ **Pythonè„šæœ¬é›†æˆ**: è‡ªåŠ¨è°ƒç”¨Pythonè„šæœ¬è¿›è¡Œæ–‡ä»¶å¤„ç†
- ğŸ¤– **AIæ™ºèƒ½ç”Ÿæˆ**: ä½¿ç”¨OpenAI APIç”Ÿæˆé«˜è´¨é‡é€‰æ‹©é¢˜
- ğŸ” **OCRæ–‡å­—è¯†åˆ«**: è‡ªåŠ¨è¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—å†…å®¹
- ğŸµ **è¯­éŸ³è½¬æ–‡å­—**: æ”¯æŒéŸ³é¢‘æ–‡ä»¶çš„è¯­éŸ³è¯†åˆ«
- ğŸ¥ **è§†é¢‘å¤„ç†**: ä»è§†é¢‘ä¸­æå–PPTå†…å®¹å’Œæ–‡å­—
- ğŸ“Š **è‡ªåŠ¨ç›‘æ§**: å®æ—¶ç›‘æ§æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨å¤„ç†
- ğŸŒ **APIæ¥å£**: æä¾›å®Œæ•´çš„RESTful API
- âš™ï¸ **çµæ´»é…ç½®**: æ”¯æŒè‡ªå®šä¹‰é…ç½®å’Œå‚æ•°è°ƒæ•´

## ğŸ“‹ æ”¯æŒçš„æ–‡ä»¶ç±»å‹

### ğŸ“„ æ–‡æ¡£ç±»å‹
- `.txt` - çº¯æ–‡æœ¬æ–‡ä»¶
- `.doc/.docx` - Microsoft Wordæ–‡æ¡£
- `.ppt/.pptx` - PowerPointæ¼”ç¤ºæ–‡ç¨¿
- `.xls/.xlsx` - Excelç”µå­è¡¨æ ¼

### ğŸ“‘ PDFæ–‡ä»¶
- `.pdf` - PDFæ–‡æ¡£ï¼ˆè‡ªåŠ¨æ–‡å­—æå–ï¼‰

### ğŸ–¼ï¸ å›¾ç‰‡ç±»å‹
- `.jpg/.jpeg` - JPEGå›¾ç‰‡ï¼ˆOCRæ–‡å­—è¯†åˆ«ï¼‰
- `.png` - PNGå›¾ç‰‡ï¼ˆOCRæ–‡å­—è¯†åˆ«ï¼‰

### ğŸ¥ è§†é¢‘ç±»å‹
- `.mp4` - MP4è§†é¢‘ï¼ˆPPTæ£€æµ‹å’Œæ–‡å­—æå–ï¼‰
- `.avi` - AVIè§†é¢‘
- `.mov` - MOVè§†é¢‘
- `.mkv` - MKVè§†é¢‘

### ğŸµ éŸ³é¢‘ç±»å‹
- `.wav` - WAVéŸ³é¢‘ï¼ˆè¯­éŸ³è½¬æ–‡å­—ï¼‰

## ğŸ› ï¸ å®‰è£…ä¾èµ–

### Node.jsä¾èµ–
```bash
npm install express cors chokidar mysql2 multer
```

### Pythonä¾èµ–
```bash
pip install PyPDF2 easyocr textract chardet vosk openai
```

## é…ç½®è¯´æ˜

é…ç½®æ–‡ä»¶ä½äº`exam-converter-config.json`ï¼ŒåŒ…å«ä»¥ä¸‹é…ç½®é¡¹ï¼š

```json
{
  "db": {
    "host": "localhost",
    "port": 3306,
    "user": "root",
    "password": "123456",
    "database": "two hours"
  },
  "watchDir": "E:\\æ–°å»ºæ–‡ä»¶å¤¹\\voicetotext\\voicetotext\\Quiz",
  "port": 3001,
  "examValidDays": 7,
  "defaultCourseId": 7,
  "defaultAuthorId": "stu023",
  "defaultExamType": 3,
  "defaultQuestionScore": 5
}
```

- `db`: æ•°æ®åº“é…ç½®
- `watchDir`: ç›‘æ§çš„ç›®å½•ï¼Œå­˜æ”¾é¢˜ç›®TXTæ–‡ä»¶çš„æ–‡ä»¶å¤¹
- `port`: APIæœåŠ¡å™¨ç«¯å£
- `examValidDays`: è€ƒè¯•æœ‰æ•ˆæœŸï¼ˆå¤©ï¼‰
- `defaultCourseId`: é»˜è®¤è¯¾ç¨‹ID
- `defaultAuthorId`: é»˜è®¤ä½œè€…ID
- `defaultExamType`: é»˜è®¤è€ƒè¯•ç±»å‹
- `defaultQuestionScore`: é»˜è®¤é¢˜ç›®åˆ†æ•°

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šæ–‡ä»¶ä¸Šä¼ ï¼ˆæ¨èï¼‰

1. å¯åŠ¨æœåŠ¡å™¨ï¼š
```bash
node txt-to-exam-converter.js
```

2. æ‰“å¼€æµ‹è¯•é¡µé¢ï¼š
```bash
# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
test-upload.html
```

3. ä¸Šä¼ æ–‡ä»¶å¹¶ç”Ÿæˆè€ƒè¯•ï¼š
   - é€‰æ‹©æ–‡ä»¶ï¼ˆæ”¯æŒå¤šç§æ ¼å¼ï¼‰
   - è¾“å…¥è€ƒè¯•æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰
   - é€‰æ‹©å†…å®¹æ¥æºç±»å‹
   - ç‚¹å‡»"ä¸Šä¼ å¹¶ç”Ÿæˆè€ƒè¯•"

### æ–¹æ³•äºŒï¼šæ–‡ä»¶ç›‘æ§ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰

1. é…ç½®`exam-converter-config.json`æ–‡ä»¶
2. è¿è¡Œè„šæœ¬ï¼š
```bash
node txt-to-exam-converter.js
```
3. å°†é¢˜ç›®TXTæ–‡ä»¶æ”¾å…¥ç›‘æ§ç›®å½•ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è§£æå¹¶åˆ›å»ºè€ƒè¯•

### æµ‹è¯•é›†æˆ

è¿è¡Œé›†æˆæµ‹è¯•è„šæœ¬ï¼š
```bash
node test-integration.js
```

## æ”¯æŒçš„é¢˜ç›®æ ¼å¼

### æ–‡æœ¬æ ¼å¼

```
### é€‰æ‹©é¢˜
1. æµ‹è¯•é¢˜ç›®
A. é€‰é¡¹A
B. é€‰é¡¹B
C. é€‰é¡¹C
D. é€‰é¡¹D
ç­”æ¡ˆ: A
```

### è¡¨æ ¼æ ¼å¼ï¼ˆCSV/TSVï¼‰

```
é¢˜ç›®ID,é¢˜ç›®å†…å®¹,é€‰é¡¹A,é€‰é¡¹B,é€‰é¡¹C,é€‰é¡¹D
1,è¿™æ˜¯ä¸€é“æµ‹è¯•é¢˜ç›®,é€‰é¡¹A,é€‰é¡¹B(ç­”æ¡ˆ),é€‰é¡¹C,é€‰é¡¹D
```

## ğŸŒ APIæ¥å£

### è€ƒè¯•ç®¡ç†
- `GET /api/Exam/getAutoGeneratedExams`: è·å–è‡ªåŠ¨ç”Ÿæˆçš„è€ƒè¯•åˆ—è¡¨
- `GET /api/Exam/getExamDetails/:examId`: è·å–æŒ‡å®šè€ƒè¯•çš„è¯¦æƒ…
- `DELETE /api/Exam/deleteExam/:examId`: åˆ é™¤æŒ‡å®šçš„è€ƒè¯•

### æ–‡ä»¶ä¸Šä¼ å’Œå¤„ç†
- `POST /api/Exam/uploadAndGenerate`: ä¸Šä¼ æ–‡ä»¶å¹¶ç”Ÿæˆè€ƒè¯•
  - å‚æ•°: `file` (æ–‡ä»¶), `title` (è€ƒè¯•æ ‡é¢˜), `sourceType` (æ¥æºç±»å‹)
  - è¿”å›: `{ flag: boolean, data: { examId: number }, message: string }`

### ç³»ç»Ÿä¿¡æ¯
- `GET /api/Exam/getSupportedFileTypes`: è·å–æ”¯æŒçš„æ–‡ä»¶ç±»å‹åˆ—è¡¨
- `GET /api/health`: ç³»ç»Ÿå¥åº·æ£€æŸ¥

### æ•™å¸ˆAPI
- `GET /api/teacher/*`: æ•™å¸ˆç›¸å…³çš„APIæ¥å£ï¼ˆè¯¦è§teacher-api.jsï¼‰

## å‰ç«¯é›†æˆ

åœ¨å‰ç«¯é¡¹ç›®çš„`StuExamTab.vue`æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹æ–¹æ³•æ¥è·å–è‡ªåŠ¨ç”Ÿæˆçš„è€ƒè¯•ï¼š

```javascript
// è·å–ä»txtæ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆçš„è€ƒè¯•
getAutoGeneratedExams(){
    this.$axios.get("http://localhost:3001/api/Exam/getAutoGeneratedExams").then((res)=>{
        if(res.data.flag){
            // å°†è‡ªåŠ¨ç”Ÿæˆçš„è€ƒè¯•æ·»åŠ åˆ°è€ƒè¯•åˆ—è¡¨ä¸­
            const autoExams = res.data.data;
            if(autoExams && autoExams.length > 0) {
                // åˆå¹¶è€ƒè¯•æ•°æ®
                this.examData = [...this.examData, ...autoExams];
                // æ›´æ–°æ€»æ•°
                this.totalCount += autoExams.length;
            }
        }else{
            console.warn("è‡ªåŠ¨ç”Ÿæˆçš„è€ƒè¯•è·å–å¤±è´¥");
        }
    }).catch(err => {
        console.error("è·å–è‡ªåŠ¨ç”Ÿæˆè€ƒè¯•å‡ºé”™:", err);
    });
}
```

ç„¶ååœ¨`getExam`æ–¹æ³•ä¸­è°ƒç”¨å®ƒï¼š

```javascript
getExam(){
    this.searchTitle["pageSize"]=this.pageSize;
    this.searchTitle["currentPage"]=this.currentPage;
    this.$axios.post("/Exam/getExam",this.searchTitle).then((res)=>{
        if(res.data.flag){
            /* ä¿å­˜å…¬å‘Šæ•°æ® */
            this.examData = res.data.data.records;
            
            // æŸ¥è¯¢ä»txtæ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆçš„è€ƒè¯•
            this.getAutoGeneratedExams();
            
            /* ä¿å­˜åˆ†é¡µæ•°æ® */
            this.totalCount = res.data.data.total;
            this.currentPage = res.data.data.current;
            this.pageSize = res.data.data.size;
        }else{
            // æœåŠ¡æ•…éšœ
            this.$message.error("ä¿¡æ¯è·å–å¤±è´¥ï¼");
        }
    });
}
```
